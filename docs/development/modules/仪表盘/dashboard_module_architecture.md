# 仪表盘模块架构设计

## 模块目标

- 适配 Open1PanelApp 作为 1Panel Linux 运维面板社区版的定位
- 提供直观的系统运行状态概览
- 支持实时资源监控和图表展示
- 提供快捷操作入口和通知中心
- 统一仪表盘数据展示与错误反馈

## 功能完整性清单

基于 1PanelV2OpenAPI.json 的 Dashboard 标签共 12 个端点:

### 系统概览 (4端点)
1. GET /dashboard - 获取仪表盘数据
2. GET /dashboard/overview - 获取系统概览
3. GET /dashboard/info - 获取系统信息
4. GET /dashboard/version - 获取版本信息

### 资源监控 (4端点)
1. GET /dashboard/cpu - 获取CPU使用率
2. GET /dashboard/memory - 获取内存使用情况
3. GET /dashboard/disk - 获取磁盘使用情况
4. GET /dashboard/network - 获取网络流量

### 快捷操作 (2端点)
1. GET /dashboard/shortcuts - 获取快捷操作列表
2. POST /dashboard/shortcut - 执行快捷操作

### 通知中心 (2端点)
1. GET /dashboard/notifications - 获取通知列表
2. POST /dashboard/notification/read - 标记通知已读

## 业务流程与交互验证

### 仪表盘加载流程
- 用户登录成功
- 加载仪表盘页面
- 并行请求各模块数据
- 渲染概览卡片
- 启动实时监控

### 资源监控流程
- 定时轮询资源数据
- 更新监控图表
- 检测异常阈值
- 触发告警通知

### 快捷操作流程
- 用户点击快捷入口
- 跳转对应功能页面
- 或执行快捷命令
- 返回操作结果

### 通知处理流程
- 加载未读通知
- 展示通知列表
- 用户查看详情
- 标记已读状态

## 关键边界与异常

### 数据加载异常
- 数据请求超时的处理
- 部分数据加载失败的处理
- 网络断开的提示

### 监控异常
- 监控数据异常的处理
- 图表渲染失败的处理
- 实时更新中断的处理

### 操作异常
- 快捷操作执行失败
- 权限不足的提示
- 资源不可用的处理

## 模块分层与职责

### 前端
- UI页面: 概览卡片、监控图表、快捷入口、通知列表
- 状态管理: 仪表盘数据缓存、实时监控状态

### 服务层
- API适配: DashboardV2Api
- 数据模型: DashboardOverview、ResourceStats、Notification等

## 数据流

1. 页面加载 -> 并行请求 -> API客户端
2. API响应解析 -> 模型映射 -> 状态更新
3. 状态更新 -> UI渲染 -> 用户展示
4. 定时器触发 -> 数据刷新 -> 图表更新

## 与现有实现的差距

- 仪表盘整体布局待优化
- 实时监控图表待完善
- 快捷操作入口待丰富
- 通知中心功能待实现

## 评审记录

| 日期 | 评审人 | 结论 | 备注 |
| --- | --- | --- | --- |
| 待定 | 评审人A | 待评审 | |
| 待定 | 评审人B | 待评审 | |

---

**文档版本**: 1.0
**最后更新**: 2026-02-14
