# 认证管理模块索引

## 模块定位

认证管理模块是Open1PanelApp的**核心安全模块**，负责用户身份验证、会话管理、安全状态检测等关键功能。作为系统入口，该模块直接关系到整个应用的安全性和用户体验。

### 核心职责

1. **用户认证** - 支持用户名密码登录、MFA多因素认证
2. **会话管理** - 登录状态维护、Token管理、安全登出
3. **安全检测** - 演示模式检测、安全状态验证
4. **验证码机制** - 图形验证码获取与验证

## 子模块结构

```
认证管理/
├── 登录认证
│   ├── 用户名密码登录
│   ├── MFA多因素认证
│   └── 验证码验证
├── 会话管理
│   ├── Token管理
│   ├── 登出处理
│   └── 会话状态
├── 安全检测
│   ├── 演示模式检测
│   ├── 安全状态查询
│   └── 语言设置获取
└── 登录设置
    └── 系统登录配置获取
```

## API端点映射

| API端点 | 方法 | 功能描述 | 实现状态 |
|---------|------|---------|---------|
| `/core/auth/captcha` | GET | 获取验证码 | ✅ 已实现 |
| `/core/auth/demo` | GET | 检查演示模式 | ✅ 已实现 |
| `/core/auth/issafety` | GET | 获取安全状态 | ✅ 已实现 |
| `/core/auth/language` | GET | 获取系统语言 | ✅ 已实现 |
| `/core/auth/login` | POST | 用户登录 | ✅ 已实现 |
| `/core/auth/logout` | POST | 用户登出 | ✅ 已实现 |
| `/core/auth/mfalogin` | POST | MFA登录 | ✅ 已实现 |
| `/core/auth/setting` | GET | 获取登录设置 | ✅ 已实现 |

## 现有实现

### API客户端
- [auth_v2.dart](../../../lib/api/v2/auth_v2.dart) - 8个API方法

### 拦截器
- [auth_interceptor.dart](../../../lib/core/network/interceptors/auth_interceptor.dart) - 请求认证拦截器

### 数据模型
- 待完善：需要创建专门的认证请求/响应模型

## 后续规划

### 短期目标（1-2周）
1. 完善认证数据模型（LoginRequest、LoginResponse等）
2. 实现登录页面UI
3. 添加单元测试覆盖

### 中期目标（1个月）
1. 实现MFA认证流程UI
2. 添加生物识别认证支持
3. 完善会话管理机制

### 长期目标
1. 支持OAuth2.0/SAML等企业级认证
2. 实现单点登录(SSO)
3. 添加登录审计日志

## 质量指标

| 指标 | 当前状态 | 目标 |
|------|---------|------|
| API实现 | 100% | 100% |
| 单元测试 | 0% | ≥80% |
| 文档覆盖 | 0% | 100% |
| UI实现 | 0% | 100% |

---

**文档版本**: 1.0  
**最后更新**: 2026-02-14  
**维护者**: Open1Panel开发团队
